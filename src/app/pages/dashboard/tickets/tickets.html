<section class="p-6 space-y-6">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-5xl font-extrabold text-gray-900">Your Tickets</h1>
  </div>
  <div class="flex items-center justify-between">
    <div class="relative">
      <button class="cursor-pointer h-full absolute text-gray-700 bg-transparent flex items-center justify-center">
        <ng-icon name="ionSearch" />
      </button>
      <input [(ngModel)]="searchText"  (ngModelChange)="onSearchChange()" type="search" placeholder="Search events" name="" id=""
        class="pl-10 py-3 rounded-none placeholder:text-slate-400 placeholder:text-[14px] placeholder:italic active:ring-[0.5px] ring-fuchsia-700" />
    </div>
    <button routerLink="/find-event"
      class="rounded-none cursor-pointer bg-fuchsia-900 text-[14px] py-3">
      Register a new Event
    </button>
  </div>
  <div class="overflow-x-auto rounded-md shadow-sm">
  <table class="min-w-full text-sm text-left">
    <thead class="bg-slate-100 text-black">
      <tr>
        <th class="px-6 py-3 font-semibold">Ticket #</th>
        <th class="px-6 py-3 font-semibold">Event</th>
        <th class="px-6 py-3 font-semibold">Date</th>
        <th class="px-6 py-3 font-semibold">Rate</th>
        <th class="px-6 py-3 font-semibold">Status</th>
        <th class="px-6 py-3 font-semibold">Quantiy</th>
      </tr>
    </thead>

    <tbody>
      @if (tickets.length > 0) { @for (ticket of  filteredTickets; track $index) {
      <tr class="hover:bg-slate-50 transition cursor-pointer">

        <td class="px-6 py-4" (click)="onView(ticket)">
          <p class="text-gray-500">{{ ticket.ticket_number }}</p>
        </td>

        <td class="px-6 py-4 flex items-center gap-4" (click)="onView(ticket)">

          <div>
            <a
              target="_blank"
              class="text-violet-600 dark:text-violet-400 font-semibold hover:underline"
            >
              {{ ticket.event_title }}
            </a>
            <p class="text-gray-500 text-xs">{{ ticket.event_location }}</p>
          </div>
        </td>

      

        <td class="px-6 py-4" (click)="onView(ticket)">
          <p class="text-gray-500">{{ ticket.event_date }}</p>
          <p class="text-xs text-gray-500">{{ ticket.event_time }}</p>
        </td>

        <td class="px-6 py-4" (click)="onView(ticket)">
          <p class="text-xs text-gray-500">GHC {{ ticket.final_price }}</p>
        </td>
        
        
        <td class="px-6 py-4" (click)="onView(ticket)">
          <div
          class="px-3 py-1 rounded-full text-xs font-medium w-fit"
          [ngClass]="{
              'bg-green-100 text-green-700': ticket.status === 'confirmed',
              'bg-yellow-100 text-yellow-700': ticket.status === 'pending',
              'bg-red-100 text-red-700': ticket.status === 'cancelled'
            }"
            >
            {{ ticket.status }}
          </div>
        </td>
        
        
        <td class="px-6 py-4">
          
          <p class="text-gray-500">{{ ticket.quantity }} of 10</p>
        </td>
      </tr>
      } } @else {
      <tr>
        <td colspan="4" class="px-6 py-4 text-center text-gray-400">
          No events found
        </td>
      </tr>
      }
    </tbody>
  </table>
</div>

</section>