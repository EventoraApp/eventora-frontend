<div class="flex relative flex-col">
  @if (!loading && event) {
  <aside class="bg-white border-r border-gray-200 p-6 space-y-6 flex-2">
    <a
      routerLink="/dashboard/events"
      class="cursor-pointer text-violet-600 font-medium flex items-center gap-2"
    >
      <ng-icon name="ionChevronBack" style="width: 22px; height: 22px" />
      Back to events
    </a>

    <div class="p-4 rounded-xl shadow-sm border border-gray-200 bg-white">
      <div
        class="relative rounded-lg overflow-hidden border border-violet-300 bg-violet-50 flex items-center justify-center h-[400px] mb-10 group"
      >
        <img
          [src]="event.image_url || 'assets/images/default.jpg'"
          alt="{{ event.title }}"
          class="w-full h-full object-fit"
        />
      </div>
      <p class="font-semibold text-gray-800">
        {{ event.title || "Event Title" }}
      </p>
      <p class="text-sm text-gray-500">
        {{ event.event_date | date : "fullDate" }} @
        {{ event.event_time }}
      </p>

      <div class="mt-3 flex items-center gap-2 justify-between">
       
        <div class="flex items-center justify-center ">
          <ng-icon
            name="ionLocationSharp"
            style="width: 20px; height: 20px"
          />
          <p class="text-sm ">
            {{ event.location }}
          </p>
        </div>
         <span
          class="px-2 py-1 rounded-full text-xs font-medium"
          [ngClass]="{
            'bg-green-100 text-green-700': event.is_published,
            'bg-yellow-100 text-yellow-700': !event.is_published
          }"
        >
          {{ event.is_published ? "Published" : "Draft" }}
        </span>
      </div>
    </div>
  </aside>
  <main class="flex-3 p-10 overflow-y-auto ">
    <div class="flex flex-col gap-6">
      <div class="flex-1">

        
        <app-event-stats [data]="event_info"></app-event-stats>


        <div class="mt-6 flex w-full justify-end">
          <button
            class="bg-transparent text-gray-600 p-0 hover:underline cursor-pointer flex items-center justify-center"
            (click)="onEdit(event)"
          >
            <ng-icon name="ionCreate" style="width: 18px; height: 18px" /> Edit
          </button>
          @if(!event.is_published){
          <button
            (click)="togglePublishEvent(event.id)"
            class="bg-transparent text-green-600 hover:underline mx-2 px-4 cursor-pointer"
          >
            Publish Event
          </button>
          }@else {
          <button
            (click)="onDelete(event)"
            class="bg-transparent text-red-400 hover:underline mx-2 px-4 cursor-pointer flex items-center justify-center"
          >
            <ng-icon name="ionTrash" style="width: 18px; height: 18px" /> Delete
          </button>

          }
        </div>
      </div>
    </div>
  </main>
  } @else {
  <p class="text-center text-gray-500 mt-10">Loading event details...</p>
  }
</div>
