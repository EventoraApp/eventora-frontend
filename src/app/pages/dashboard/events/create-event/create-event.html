<div class="flex min-h-screen relative">
  <!-- Sidebar -->
  <aside class="w-64 bg-white border-r border-gray-200  p-6 space-y-6 fixed">
    <a routerLink="/dashboard/events" class="cursor-pointer text-violet-600 font-semibold flex items-center gap-2">
        <ng-icon name="ionChevronBack" style="width: 22px; height: 22px;"/>
        Back to events
    </a>

    <!-- Preview Card -->
    <div class="p-4 rounded-xl shadow-sm border border-gray-200 bg-white ">
      <p class="font-semibold text-gray-800">{{ event.title || 'Event Title' }}</p>
      <p class="text-sm text-gray-500 dark:text-gray-400">
        {{ event.event_date || 'Fri, Nov 21, 2025' }},
        {{ event.event_time || '10:00 AM' }}
      </p>
      <div class="mt-3">
        <button class="border border-gray-300 rounded-md text-sm px-3 py-1">Draft</button>
        <a href="#" class="ml-3 text-sm text-blue-600 hover:underline">Preview</a>
      </div>
    </div>


  </aside>

  <!-- Main Form Area -->
  <main class="flex-1 p-10 overflow-y-auto ml-64 px-30">
    <!-- Upload Area -->
    <div
      class="relative rounded-lg overflow-hidden border-2 border-dashed border-violet-300 bg-violet-50  flex items-center justify-center h-[350px] mb-10 group"
    >
      @if (event.image) {
        <img [src]="event.image" alt="Event image" class="w-full h-full object-fit" />
          <button
        (click)="removeImage()"
        class="absolute  top-3 right-3 bg-white text-violet-600  hover:bg-red-400 hover:text-white rounded-full p-2 cursor-pointer opacity-0 group-hover:opacity-100 transition-all duration-300 shadow-md"
        title="Remove image"
      >
        <ng-icon name="ionTrashOutline" style="width: 20px; height: 20px;" />
      </button>
      } @else {
        <label class="cursor-pointer flex flex-col items-center justify-center text-center text-violet-700">
          <input type="file" hidden (change)="onImageSelect($event)"  accept=".jpg,.jpeg,.png" />
          <div
            class="bg-white  rounded-md px-5 py-3 shadow-sm border border-violet-200 flex flex-col items-center justify-center"
          >        <ng-icon name="ionCloudUpload" style="width: 40px; height: 40px;"/>

            
            <span class="font-medium">Upload photos and video</span>
          </div>
        </label>
      }
    </div>

    <!-- Event Overview -->
    <section class="bg-white rounded-md p-8 shadow-sm border border-gray-200">
      <h2 class="text-2xl font-bold text-gray-800  mb-6">Event Overview</h2>

      <form (ngSubmit)="onSubmit()" class="space-y-6">
        <!-- Event title -->
        <div>
          <label class="block font-semibold mb-2 text-gray-700 ">Event title *</label>
          <input
            [(ngModel)]="event.title"
            name="title"
            type="text"
            required
            placeholder="Event Title"
            class="placeholder:text-slate-400 placeholder:text-[14px] placeholder:italic w-full border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-violet-500 outline-none"
          />
          @if (!event.title) {
            <p class="text-red-500 text-sm mt-1">Event title is required.</p>
          }
        </div>

        <!-- Summary -->
        <div>
          <label class="block font-semibold mb-2 text-gray-700 ">Summary</label>
          <textarea
            [(ngModel)]="event.description"
            name="description"
            rows="3"
            maxlength="140"
            placeholder="Short description of your event..."
            class="placeholder:text-slate-400 placeholder:text-[14px] placeholder:italic w-full border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-violet-500 outline-none"
          ></textarea>
          <p class="text-gray-400 text-xs mt-1">Max 140 characters</p>
        </div>

        <!-- Date / Time / Category -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div>
            <label class="block font-semibold mb-2 text-gray-700 ">Event date</label>
            <input
              type="date"
              [(ngModel)]="event.event_date"
              name="event_date"
              required
              class="placeholder:text-slate-400 placeholder:text-[14px] placeholder:italic w-full border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-violet-500 outline-none"
            />
          </div>
          <div>
            <label class="block font-semibold mb-2 text-gray-700 ">Event time</label>
            <input
              type="time"
              [(ngModel)]="event.event_time"
              name="event_time"
              required
              class="placeholder:text-slate-400 placeholder:text-[14px] placeholder:italic w-full border border-gray-300  rounded-md p-3 focus:ring-2 focus:ring-violet-500 outline-none"
            />
          </div>
          <div>
            <label class="block font-semibold mb-2 text-gray-700 ">Category</label>
            <input
              type="text"
              [(ngModel)]="event.category"
              name="category"
              placeholder="Workshop, Music, Tech..."
              class="placeholder:text-slate-400 placeholder:text-[14px] placeholder:italic w-full border border-gray-300  rounded-md p-3 focus:ring-2 focus:ring-violet-500 outline-none"
            />
          </div>
        </div>

        <!-- Location / Capacity -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block font-semibold mb-2 text-gray-700 ">Location</label>
            <input
              type="text"
              [(ngModel)]="event.location"
              name="location"
              placeholder="Accra, Ghana"
              class="placeholder:text-slate-400 placeholder:text-[14px] placeholder:italic w-full border border-gray-300  rounded-md p-3 focus:ring-2 focus:ring-violet-500 outline-none"
            />
          </div>
          <div>
            <label class="block font-semibold mb-2 text-gray-700">Capacity</label>
            <input
              type="number"
              [(ngModel)]="event.capacity"
              name="capacity"
               placeholder="Set event capacity"
        (focus)="openDrawer()"
              class="placeholder:text-slate-400 placeholder:text-[14px] placeholder:italic w-full border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-violet-500 outline-none"
            />
          </div>
        </div>

        <!-- Save Button -->
        <div class="flex justify-end">
          <button
            type="submit"
            class="bg-orange-600 hover:bg-orange-700 text-white px-8 py-3 rounded-md font-semibold shadow-sm transition"
          >
            Save
          </button>
        </div>
      </form>
    </section>
  </main>
</div>


<div
  class="fixed top-0 z-200 right-0 w-full sm:w-[400px] h-full bg-white shadow-2xl z-50 transform transition-transform duration-300 ease-in-out"
  [class.translate-x-full]="!isDrawerOpen"
>
  <div class="p-6 flex flex-col h-full">
    <h3 class="text-xl font-semibold mb-4">Add Tickets</h3>

    <div class="flex space-x-2 mb-4">
      <button
        class="flex-1 border border-gray-300 rounded-md py-2 font-medium "
      >
        Paid
      </button>
      <button
        class="flex-1 border border-violet-500 text-white rounded-md py-2 font-medium"
      >
        Free
      </button>
      <button
        class="flex-1 border border-gray-300 rounded-md py-2 font-medium"
      >
        Donation
      </button>
    </div>

    <form class="flex-1 overflow-y-auto space-y-4">
      <div>
        <label class="block text-gray-700 font-medium mb-1">Name</label>
        <input
          type="text"
          class="w-full border border-gray-300 rounded-md px-3 py-2"
          placeholder="General Admission"
        />
      </div>

      <div>
        <label class="block text-gray-700 font-medium mb-1">Available quantity</label>
        <input
          type="number"
          class="w-full border border-gray-300 rounded-md px-3 py-2"
          placeholder="Enter quantity"
        />
      </div>

      <div>
        <label class="block text-gray-700 font-medium mb-1">Price</label>
        <input
          type="text"
          disabled
          value="Free"
          class="w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-50 text-gray-500"
        />
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-gray-700 font-medium mb-1">Sales start</label>
          <input type="date" class="w-full border border-gray-300 rounded-md px-3 py-2" />
        </div>
        <div>
          <label class="block text-gray-700 font-medium mb-1">Start time</label>
          <input type="time" class="w-full border border-gray-300 rounded-md px-3 py-2" />
        </div>

        <div>
          <label class="block text-gray-700 font-medium mb-1">Sales end</label>
          <input type="date" class="w-full border border-gray-300 rounded-md px-3 py-2" />
        </div>
        <div>
          <label class="block text-gray-700 font-medium mb-1">End time</label>
          <input type="time" class="w-full border border-gray-300 rounded-md px-3 py-2" />
        </div>
      </div>
    </form>

    <div class="flex justify-between mt-6">
      <button
        (click)="closeDrawer()"
        class="px-4 py-2 border border-gray-300 rounded-md font-medium"
      >
        Cancel
      </button>
      <button
        class="px-4 py-2 bg-violet-600 text-white rounded-md hover:bg-violet-700"
      >
        Save
      </button>
    </div>
  </div>
</div>